<div *ngIf="isReady">
    <div class="linea-resumen">
        <h1 class="capitalize">Línea {{ name }} - {{ recorrido }}</h1>
        <div class="linea-resumen-info">
            <div class="linea-resumen-nucleos">
                <div class="linea-resumen-nucleo" *ngFor="let nucleo of nucleosList">
                    <span class="linea-resumen-nucleo-etiqueta">{{ nucleo }}</span>
                    <span class="linea-resumen-nucleo-separador"></span>
                </div>
            </div>
            <div class="linea-resumen-datos">
                <span class="linea-resumen-dato">
                    <svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path fill="currentColor" d="M488 128h-8V80c0-44.8-99.2-80-224-80S32 35.2 32 80v48h-8c-13.25 0-24 10.74-24 24v80c0 13.25 10.75 24 24 24h8v160c0 17.67 14.33 32 32 32v32c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-32h192v32c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-32h6.4c16 0 25.6-12.8 25.6-25.6V256h8c13.25 0 24-10.75 24-24v-80c0-13.26-10.75-24-24-24zM112 400c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm16-112c-17.67 0-32-14.33-32-32V128c0-17.67 14.33-32 32-32h256c17.67 0 32 14.33 32 32v128c0 17.67-14.33 32-32 32H128zm272 112c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"></path>
                    </svg>
                    {{ paradasInfo.length }}
                </span>
                <span class="linea-resumen-dato">
                    <svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"></path>
                    </svg>
                    {{ duracion }}
                </span>
                <span class="linea-resumen-dato">
                    <svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                        <path fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34zm192-34l-136-136c-9.4-9.4-24.6-9.4-33.9 0l-22.6 22.6c-9.4 9.4-9.4 24.6 0 33.9l96.4 96.4-96.4 96.4c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l136-136c9.4-9.2 9.4-24.4 0-33.8z"></path>
                    </svg>
                    {{ saltos }}
                </span>
                <span class="linea-resumen-dato" *ngIf="accesible">
                    <svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path fill="#000000" d="M496.101 385.669l14.227 28.663c3.929 7.915.697 17.516-7.218 21.445l-65.465 32.886c-16.049 7.967-35.556 1.194-43.189-15.055L331.679 320H192c-15.925 0-29.426-11.71-31.679-27.475C126.433 55.308 128.38 70.044 128 64c0-36.358 30.318-65.635 67.052-63.929 33.271 1.545 60.048 28.905 60.925 62.201.868 32.933-23.152 60.423-54.608 65.039l4.67 32.69H336c8.837 0 16 7.163 16 16v32c0 8.837-7.163 16-16 16H215.182l4.572 32H352a32 32 0 0 1 28.962 18.392L438.477 396.8l36.178-18.349c7.915-3.929 17.517-.697 21.446 7.218zM311.358 352h-24.506c-7.788 54.204-54.528 96-110.852 96-61.757 0-112-50.243-112-112 0-41.505 22.694-77.809 56.324-97.156-3.712-25.965-6.844-47.86-9.488-66.333C45.956 198.464 0 261.963 0 336c0 97.047 78.953 176 176 176 71.87 0 133.806-43.308 161.11-105.192L311.358 352z"></path>
                    </svg>
                    Accesible
                </span>
            </div>
        </div>
    </div>
    <div>
        <span>
            <h3>Filtro</h3>
        </span>
        <div class="horarios-filtro">
            <div class="horarios-filtro-group relative" (clickOutside)="dropdownSalida = false">
                <label for="paradaSalida">Salida</label>
                <input
                    [(ngModel)]="filtroParadaSalida"
                    (input)="updateFiltroParadasSalida()"
                    (focus)="dropdownSalida = true"
                    class="input dropdown-input w100"
                    placeholder="Selecciona una parada" 
                    name="paradaSalida" 
                    type="text">
                <div class="dropdown-container w100" [ngClass]="{ 'visible': dropdownSalida }">
                    <li 
                        *ngFor="let parada of filtroParadasSalida"
                        (click)="setFiltroParadaSalida($event) ; dropdownSalida = false;">
                            {{ parada.name }}
                    </li>
                </div>
            </div>
            <div class="horarios-filtro-group relative" (clickOutside)="dropdownDestino = false">
                <label for="paradaDestino">Destino</label>
                <input
                    [disabled]="!filtroParadaSalida"
                    [(ngModel)]="filtroParadaDestino"
                    (input)="updateFiltroParadasDestino()"
                    (focus)="dropdownDestino = true"
                    class="input dropdown-input w100"
                    placeholder="Selecciona una parada" 
                    name="paradaDestino" 
                    type="text">
                <div class="dropdown-container w100" [ngClass]="{ 'visible': dropdownDestino }">
                    <li 
                        *ngFor="let parada of filtroParadasDestino"
                        (click)="setFiltroParadaDestino($event); dropdownDestino = false;">
                            {{ parada.name }}
                    </li>
                </div>
            </div>
            <!-- @TODO: Custom datepicker -->
            <div class="horarios-filtro-group">
                <label for="fecha">Fecha de salida</label>
                <input class="input w100" placeholder="Selecciona día" name="fecha" type="date">
            </div>
            <div class="horarios-filtro-group">
                <label for="hora">Hora de salida</label>
                <input class="input w100" placeholder="Selecciona horario" name="hora" type="time">
            </div>
        </div>
    </div>
    <div class="tabla-horarios">
        <div>
            <h2 id="ida">Horarios de ida</h2>
            <div *ngFor="let horario of tablaHorariosIda">
                <h3 [id]="'ida' + horario.frecuencia">{{ normalizeFrecuencias(horario.frecuencia) }}</h3>
                <div class="horarios-parada" *ngFor="let parada of horario.paradas">
                    <div class="horarios-parada-info">
                        <h4>{{ parada.name }}</h4>
                        <span class="zona-{{parada.zona}}">Zona {{ parada.zona }}</span>
                    </div>
                    <span>
                        <span class="horas" *ngFor="let hora of parada.horario">
                            <span class="excepcion" *ngIf="hora.excepcion">{{ hora.excepcion }}</span>
                            <span class="hora">{{ hora.hora }}</span>
                        </span>
                    </span>
                </div>
            </div>
        </div>
        <div *ngIf="hasVuelta">
            <h2 id="vuelta">Horarios de vuelta</h2>
            <div *ngFor="let horario of tablaHorariosVuelta">
                <h3 [id]="'vuelta' + horario.frecuencia">{{ normalizeFrecuencias(horario.frecuencia) }}</h3>
                <div class="horarios-parada" *ngFor="let parada of horario.paradas">
                    <div class="horarios-parada-info">
                        <h4>{{ parada.name }}</h4>
                        <span class="zona-{{parada.zona}}">Zona {{ parada.zona }}</span>
                    </div>
                    <span>
                        <span class="horas" *ngFor="let hora of parada.horario">
                            <span class="excepcion" *ngIf="hora.excepcion">{{ hora.excepcion }}</span>
                            <span class="hora">{{ hora.hora }}</span>
                        </span>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
